{% extends 'base.html' %}
{% load static %}
{% load currency %}
{% load util %}

{% block css %}
	{{ block.super }}
	<style>
    section {
        scroll-snap-align: start;
    }

	@media only screen and (max-width: 320px) {
			.hero-section {
				max-height: none;
			}
			.hero-bg {
				min-height: clamp(564px, calc(100vh - 93px), 1000px) !important;
			}

			.event-section {
				max-height: none;
			}

			.event-bg {
				min-height: clamp(564px, calc(100vh - 93px), 1000px) !important;
			}

			.faq-section {
				max-height: none;
			}

			.faq-bg {
				min-height: clamp(564px, calc(100vh - 93px), 1000px) !important;
			}

			.contact-section {
				max-height: none;
			}
		}

		@media only screen and (min-width: 321px) and (max-width: 561px) {
			.hero-section {
				max-height: none;
			}
			.hero-bg {
				min-height: clamp(564px, calc(100vh - 93px), 1000px) !important;
			}

			.event-section {
				max-height: none;
			}

			.event-bg {
				min-height: clamp(564px, calc(100vh - 93px), 1000px) !important;
			}

			.faq-section {
				max-height: none;
			}

			.faq-bg {
				min-height: clamp(1024px, calc(100vh - 93px), 1000px) !important;
			}

			.contact-section {
				max-height: none;
			}
		}

		@media only screen and (min-width: 562px) and (max-width: 768px) {
			.hero-section {
				max-height: none;
			}
			.hero-bg {
				min-height: clamp(564px, calc(100vh - 93px), 1000px) !important;
			}

			.event-section {
				max-height: none;
			}

			.event-bg {
				min-height: clamp(564px, calc(100vh - 93px), 1000px) !important;
			}

			.faq-section {
				max-height: none;
			}

			.faq-bg {
				min-height: clamp(564px, calc(100vh - 93px), 1000px) !important;
			}

			.contact-section {
				max-height: none;
			}
		}

		@media only screen and (min-width: 769px) and (max-width: 991.98px) {
			.hero-section {
				max-height: none;
			}
			.hero-bg {
				min-height: clamp(564px, calc(100vh - 93px), 1000px) !important;
			}

			.event-section {
				max-height: none;
			}

			.event-bg {
				min-height: clamp(564px, calc(100vh - 93px), 1000px) !important;
			}

			.faq-section {
				max-height: none;
			}

			.faq-bg {
				min-height: clamp(564px, calc(100vh - 93px), 1000px) !important;
			}

			.contact-section {
				max-height: none;
			}
		}

		@media only screen and (min-width: 992px) {
			.hero-section {
				max-height: 893px;
			}
			.hero-bg {
				min-height: clamp(564px, calc(100vh - 93px), 1000px) !important;
			}

			.event-section {
				max-height: 893px;
			}

			.event-bg {
				min-height: clamp(564px, calc(100vh - 93px), 1000px) !important;
			}

			.faq-section {
				max-height: 893px;
			}

			.faq-bg {
				min-height: clamp(564px, calc(100vh - 93px), 1000px) !important;
			}

			.contact-section {
				max-height: 893px;
			}
		}

	.custom-tabs .nav-link {
		border: none; /* Remove default Bootstrap border */
		font-weight: bold; /* Make the text bold */
		color: black; /* Ensure text is black */
		padding-bottom: 5px; /* Adjust spacing */
		position: relative; /* Needed for underline effect */
	}

	.custom-tabs .nav-link.active {
		color: black; /* Ensure active tab text is black */
		background: transparent !important;
	}

	.custom-tabs .nav-link.active::after {
		content: "";
		display: block;
		width: 100%;
		height: 1px;
		background-color: black; /* Underline color */
		position: absolute;
		bottom: 0;
		left: 0;
	}

    .movie-swiper {
      width: 100% !important;
      /* Height will be automatically adjusted by aspect-ratio of slides */
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 2rem 0;
    }

    .movie-swiper .swiper-wrapper {
      align-items: center;
    }

    .movie-swiper .swiper-slide {
      aspect-ratio: 16 / 9;
      width: 80%; /* Controls visible size of center slide */
      max-width: 960px; /* Optional: prevent it from growing too large */
      border-radius: 20px;
      background: #111;
      color: white;
      font-size: 2rem;
      display: flex;
      justify-content: center;
      align-items: center;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      overflow: hidden;
    }

    .swiper-slide video {
        pointer-events: none; /* This allows clicks to pass through */
    }

    @media (max-width: 767px) {
      .movie-swiper .swiper-slide {
        width: 90% !important;
      }

		#hero-swiper .button-prev {
			scale: 0.8;
			top: calc(100% - 80px) !important;
			left: calc(100% - 180px) !important;
		}

		#hero-swiper .button-next {
			scale: 0.8;
			top: calc(100% - 80px) !important;
			right: 24px !important;
		}
    }

	@media (max-width: 480px) {
		#hero-swiper .button-prev {
			scale: 0.6;
			top: calc(100% - 80px) !important;
			left: calc(100% - 140px) !important;
		}

		#hero-swiper .button-next {
			scale: 0.6;
			top: calc(100% - 80px) !important;
			right: 0 !important;
		}
	}

    /* Zoom effects */
    .zoom-out {
      transform: scale(0.6) !important;
    }

    .zoom-in {
      transform: scale(1) !important;
    }

    #hero-swiper .swiper-slide {
      transition: transform 0.5s ease;
    }

    #hero-swiper .button-prev:after {
        content: none !important;
    }
    #hero-swiper .button-prev {
        width: 96px;
		height: auto;
        z-index: 10;
		top: 50%;
		left: 32px;
		cursor: pointer;
        transition: all 0.3s;
        background-repeat: no-repeat;
        background-position: center;
        background-size: 14px;
    }


    #hero-swiper .button-next:after {
        content: none !important;
    }
    #hero-swiper .button-next {
        width: 96px;
		height: auto;
        top: 50%;
        right: 32px;
        z-index: 10;
        cursor: pointer;
        transition: all 0.3s;
        background-repeat: no-repeat;
        background-position: center;
        background-size: 14px;
    }

	.hover-scale:hover {
		transform: scale(1.05);
		transition: transform 0.3s ease;
	}
	</style>
{% endblock %}

{% block content %}
<section id="hero-section" class="hero-section profile-cover" style="overflow-y: clip;">
    <div class="swiper hero-swiper" id="hero-swiper">
        <div class="swiper-wrapper">
            {% for banner in banners %}
                <div class="swiper-slide">
                    <div class="profile-cover-img hero-section hero-bg" style="background-image: url({{ banner.image.url }}); background-blend-mode: overlay; background-color: #00000080;"></div>
                    <div class="container d-flex flex-column text-white justify-content-center align-items-start position-absolute bottom-50 top-50 start-50 translate-middle-x px-4 px-sm-2 px-md-5 w-100">
                        <h1 class="fw-bold lh-1 mb-2" style="font-size: 40px;">{{ banner.title }}</h1>
                        <p class="fs-lg lh-1 mb-4 w-100 w-md-75 w-lg-50">{{ banner.description }}</p>
                        <div class="d-flex flex-row gap-2">
                            <a type="button" class="btn {{ banner.primaryButtonClassNames }} me-2" href="{{ banner.primaryButtonLink }}">{{ banner.primaryButtonText }}</a>
                            <a type="button" class="btn {{ banner.secondaryButtonClassNames }} me-2" href="{{ banner.secondaryButtonLink }}">{{ banner.secondaryButtonText }}</a>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
        <div class="position-absolute button-prev">
			<div class="position-relative d-flex flex-row justify-content-end w-72px">
            	<img src="{% static R.images.arrowPrev.path %}" width="72">
            	<div class="w-56px h-56px rounded-circle position-absolute" style="border: 1px solid #FFFFFF; top: 12%; left: -24px;"></div>
			</div>
        </div>
        <div class="position-absolute button-next">
			<div class="position-relative d-flex flex-row justify-content-start w-72px">
				<img src="{% static R.images.arrowNext.path %}" width="72">
				<div class="w-56px h-56px rounded-circle position-absolute" style="border: 1px solid #FFFFFF; top: 12%; right: -24px;"></div>
			</div>
        </div>
    </div>
</section>
<section id="intro-section" class="intro-section container d-flex flex-column justify-content-center align-items-center py-5">
    <div class="swiper movie-swiper">
      <div class="swiper-wrapper">
        <div class="swiper-slide d-flex flex-column text-center rounded-4" data-type="image" style="background: url('{{ request.scheme }}://{{ request.get_host }}{% static R.images.visionBg.path %}') center center / cover;">
            <div class="h-100 p-4 d-flex flex-column justify-content-center align-items-center w-100 w-md-75 w-lg-75" style="transition: all 0.3s ease-in-out">
                <div class="text-center mb-2 mb-lg-3 mb-md-4 lh-1">
                    <i class="bi bi-eye-fill text-light fs-48 fs-lg-40 fs-md-32 fs-sm-24"></i>
                </div>
                <span class="fs-32 fs-xl-28 fs-lg-24 fs-md-20 fs-sm-16">
                    Our Vision
                </span>
                <p class="fw-light lh-1 mb-4 fs-18 fs-xl-16 fs-lg-14 fs-md-14 fs-sm-12" style="line-height: 1.6;">
                    Enhance the career experience of everyone we empower.
                </p>
            </div>
        </div>
        <div class="swiper-slide rounded-4" data-type="video" style="position: relative;">
          <video id="introVideo" playsinline autoplay muted loop style="width: 100%; object-fit: cover; border-radius: 16px; aspect-ratio: 16/9 !important;" preload="auto" poster="{% static R.images.introThumbnail.path %}">
            <source src="{% static R.images.intro.path %}" type="video/mp4" />
          </video>
          <button id="muteToggle" style="
            position: absolute;
            z-index: 1000;
            top: 16px;
            right: 16px;
            background: rgba(0,0,0,0.5);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            font-size: 20px;
            cursor: pointer;
          ">üîá</button>
        </div>
        <div class="swiper-slide d-flex flex-column text-center rounded-4" data-type="image" style="background: url('{{ request.scheme }}://{{ request.get_host }}{% static R.images.missionBg.path %}') center center / cover;">
            <div class="h-100 p-4 d-flex flex-column justify-content-center align-items-center w-100 w-md-75 w-lg-75" style="transition: all 0.3s ease-in-out">
                <div class="text-center mb-2 mb-lg-3 mb-md-4 lh-1">
                    <i class="bi bi-bullseye text-light fs-48 fs-lg-40 fs-md-32 fs-sm-24"></i>
                </div>
                <span class="fs-32 fs-xl-28 fs-lg-24 fs-md-20 fs-sm-16">
                    Our Mission
                </span>
                <p class="fw-light lh-1 mb-4 fs-18 fs-xl-16 fs-lg-14 fs-md-14 fs-sm-12" style="line-height: 1.6;">
                    {{ intro.mission|safe }}
                </p>
            </div>
        </div>
      </div>
    </div>
</section>
<section id="event-section" class="event-section profile-cover" style="overflow-y: clip;">
    <div class="profile-cover-img hero-section event-bg" style="background-image: url({{ request.scheme }}://{{ request.get_host }}{{ event.background }})"></div>
    <div class="container d-flex flex-column text-white justify-content-center align-items-start position-absolute bottom-50 top-50 start-50 translate-middle-x px-4 px-sm-2 px-md-0 w-100 gap-3">
		<h2 class="fw-light fs-1 lh-1">UPCOMING EVENT</h2>
        <h1 class="fw-semibold lh-1 mb-2" style="font-size: 48px;">{{ upcomingEvent.name }}</h1>
		<p class="fs-3 fw-light lh-1_2 mb-4 w-100 w-md-75 w-lg-50">{{ upcomingEvent.shortDescription }}</p>
		<div class="d-flex flex-row gap-3" id="count-down">
			<div class="d-flex flex-column gap-1">
				<span class="fw-semibold lh-1" style="font-size: 36px;" id="eventRemainingDays">12</span>
				<span class="fs-base">days</span>
			</div>
			<div class="d-flex flex-column gap-1">
				<span class="fw-semibold lh-1" style="font-size: 36px;" id="eventRemainingHours">10</span>
				<span class="fs-base">hours</span>
			</div>
			<div class="d-flex flex-column gap-1">
				<span class="fw-semibold lh-1" style="font-size: 36px;" id="eventRemainingMinutes">24</span>
				<span class="fs-base">minutes</span>
			</div>
			<div class="d-flex flex-column gap-1">
				<span class="fw-semibold lh-1" style="font-size: 36px;" id="eventRemainingSeconds">13</span>
				<span class="fs-base">sec</span>
			</div>
		</div>
		<div class="d-flex flex-row gap-2">
			<a type="button" class="btn btn-primary me-2" href="#">Learn More</a>
		</div>
    </div>
</section>
<section id="programs-section" class="programs-section container d-flex flex-column justify-content-center align-items-center pb-4 pt-5">
	<h1 class="fw-medium lh-1 mb-2 text-center" style="font-size: 50px;">What We Do</h1>
	<p class="fs-5 mb-4 text-center" style="max-width: 768px;">Have questions? We're here to help you on your English learning journey.</p>
	<div class="d-flex flex-column w-100">
			<ul class="custom-tabs nav nav-tabs justify-content-center border-bottom-0">
                {% for audience in audiences %}
                    <li class="nav-item m-0">
                        <a href="#audience-{{ audience.id }}" class="nav-link {% if forloop.first %}active{% endif %}" data-bs-toggle="tab">
                            {{ audience.name }}
                        </a>
                    </li>
                {% endfor %}
			</ul>
			<div class="tab-content mt-3 w-100">
                {% for audience in audiences %}
                    <div class="tab-pane fade show {% if forloop.first %}active{% endif %} w-100" id="audience-{{ audience.id }}">
                        <div class="swiper w-100" id="audience-{{ audience.id }}-programs">
                            <div class="swiper-wrapper" style="padding-bottom: 16px;">
                                {% for event in audience.events.all %}
                                    <div class="swiper-slide pt-2" style="max-width: 360px; height: 100%;">
                                        <div class="card w-100 hover-scale" style="height: 100%;">
                                            <img src="{{ event.cover.url }}" class="card-img-top w-100" style="object-fit: cover;" alt="{{ event.name }}">
                                            <div class="card-body d-flex flex-column justify-content-center align-items-start" style="height: 100%;">
                                                <h4 class="fs-5 fw-bold lh-1 mb-1">{{ event.name }}</h4>
                                                <p class="fs-xs mb-2" style="height: 100%;">{{ event.shortDescription }}</p>
                                                <button class="btn btn-primary" style="padding: 4px 16px;">Read More</button>
                                            </div>
                                        </div>
                                    </div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                {% endfor %}
			</div>
		</div>
</section>
<section id="faq-section" class="faq-section profile-cover" style="overflow-y: clip;">
	<div class="profile-cover-img hero-section faq-bg" style="background-image: url({{ request.scheme }}://{{ request.get_host }}{{ faq.background }})"></div>
	<div class="d-flex flex-column text-white justify-content-center align-items-start position-absolute top-0 start-50 translate-middle-x px-4 px-sm-2 px-md-0 w-100 h-100" style="background: #0A7EBFC4;">
		<div class="container d-flex flex-column text-white justify-content-center align-items-center gap-3 gap-lg-2">
			<!-- Section Title -->
            <h1 class="fw-medium text-center lh-1 mb-2 animate__animated fs-48 fs-xl-40 fs-lg-32 fs-md-28 fs-sm-24" data-animate="animate__fadeInDown">
                Frequently Asked Questions
            </h1>

            <!-- Section Subtitle -->
            <p class="text-center fw-normal mb-3 mb-lg-4 mb-md-5 animate__animated fs-18 fs-xl-16 fs-lg-14 fs-md-14 fs-sm-12" data-animate="animate__fadeInUp" style="max-width: 600px; animation-delay: 100ms;">
                Find answers to common questions about our programs, events, and services.
            </p>

            <!-- FAQ Items -->
            <div class="row w-100" style="max-width: 1000px;">
                {% for faq in faq.faqs %}
                    <div class="col-lg-6 mb-2 mb-lg-3 mb-md-4">
                        <div class="faq-item animate__animated" data-animate="animate__fadeInUp" style="animation-delay: 200ms;">
                            <div class="faq-question d-flex align-items-center justify-content-between px-3 py-1 py-md-2 py-lg-3 rounded-3" style="background: rgba(255, 255, 255, 0.60); cursor: pointer;" onclick="const answer = this.nextElementSibling; const icon = this.querySelector('i'); if (answer.style.display === 'block') { window.unToggleAllFaqs(); answer.style.display = 'none'; icon.style.transform = 'rotate(0deg)'; } else { window.unToggleAllFaqs(); answer.style.display = 'block'; icon.style.transform = 'rotate(180deg)'; }">
                                <h5 class="fw-bold mb-0 text-dark">{{ faq.question }}</h5>
                                <i class="bi bi-chevron-down fs-20 fs-lg-18 fs-md-16 fs-sm-14" style="color: #4669f5; transition: transform 0.3s ease;"></i>
                            </div>
                            <div class="faq-answer px-3 py-1 py-md-2 py-lg-3 " style="background: rgba(255, 255, 255, 0.40); border-left: 3px solid #0a7ebf; margin-top: 1px; display: none;">
                                <p class="text-dark mb-0 fs-14 fs-md-12" style="line-height: 1.6;">
                                    {{ faq.answer }}
                                </p>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
		</div>
	</div>
</section>
{% include 'common/contact-section.html' %}
<section id="sponsors-section" class="sponsors-section d-flex flex-column justify-content-center align-items-center py-5 bg-primary">
    <div class="container">
        <div class="d-flex flex-row gap-2 swiper" id="sponsors">
            <div class="swiper-wrapper" >
                {% for _ in ''|ljust:10 %}
                    <img src="{% static R.images.sponsorSample.path %}" class="swiper-slide img-fluid px-2" alt="Sponsor" style="max-width: 160px; max-height: 160px;">
                {% endfor %}
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block js %}
{{ block.super }}
	<script nonce="{{ nonce }}">
		document.addEventListener('DOMContentLoaded', function() {
            function unToggleAllFaqs() {
                document.querySelectorAll('.faq-answer').forEach(answer => {
                    answer.style.display = 'none';
                });
                document.querySelectorAll('.faq-question i').forEach(icon => {
                    icon.style.transform = 'rotate(0deg)';
                });
            }

            window.unToggleAllFaqs = unToggleAllFaqs;

			function animateCurrentSlide(slide) {
				if (!slide) return;
				const title = slide.querySelector("h1");
				const subtitle = slide.querySelector("p");
				const buttons = slide.querySelectorAll("a.btn");

				if (title && subtitle && buttons.length) {
					gsap.to(title, {
						opacity: 1,
						y: 0,
						duration: 1,
						ease: "power2.out",
						delay: 0.2
					});
					gsap.to(subtitle, {
						opacity: 1,
						y: 0,
						duration: 1,
						ease: "power2.out",
						delay: 0.4
					});
					gsap.to(buttons, {
						opacity: 1,
						y: 0,
						duration: 1,
						ease: "power2.out",
						stagger: 0.1,
						delay: 0.6
					});
				}
			}

            let autoplayTimeout;
            let heroSwiper = new Swiper('.hero-swiper', {
              loop: true,
              slidesPerView: 1,
              allowTouchMove: false,
              on: {
                init: function () {
                  startAutoplay();
				  animateCurrentSlide(this.slides[this.activeIndex]);
                }
              },
            });

            function startAutoplay() {
              clearTimeout(autoplayTimeout);
              autoplayTimeout = setTimeout(() => {
                triggerZoomSlide('next');
                startAutoplay();
              }, 5000);
            }

            function triggerZoomSlide(direction = 'next') {
              const slides = heroSwiper.slides;

              // 1. Zoom out
              slides.forEach(slide => {
                slide.classList.remove('zoom-in');
                slide.classList.add('zoom-out');
              });

              // 2. After zoom out, change slide
              setTimeout(() => {
                if (direction === 'next') {
                  heroSwiper.slideNext(500, false);
                } else {
                  heroSwiper.slidePrev(500, false);
                }

                // 3. After slide transition, zoom in
                setTimeout(() => {
                  slides.forEach(slide => {
                    slide.classList.remove('zoom-out');
                    slide.classList.add('zoom-in');
                  });
				  animateCurrentSlide(slides[heroSwiper.activeIndex]);
                }, 500);
              }, 500);
            }

            // Restart autoplay on manual navigation
            document.querySelector('.button-next').addEventListener('click', () => {
              triggerZoomSlide('next');
              startAutoplay();
            });

            document.querySelector('.button-prev').addEventListener('click', () => {
              triggerZoomSlide('prev');
              startAutoplay();
            });

            {% for audience in audiences %}
                new Swiper('#audience-{{ audience.id }}-programs', {
                    slidesPerView: 'auto',
                    spaceBetween: 16,
                    loop: true,
                    autoplay: {
                        delay: 2000,
                        disableOnInteraction: false,
                    }
                });
            {% endfor %}

            let sponsors = new Swiper('#sponsors', {
                slidesPerView: 'auto',
                spaceBetween: 16,
                loop: true,
                autoplay: {
                    delay: 2000,
                    disableOnInteraction: false,
                }
            });

            let userNavigated = false;
            const intro = new Swiper('.movie-swiper', {
              effect: 'coverflow',
              loop: false,
              centeredSlides: true,
              initialSlide: 1,
              grabCursor: true,
              slidesPerView: 1.5,
              spaceBetween: 32,
              coverflowEffect: {
                rotate: 0,
                stretch: -50,
                depth: 150,
                modifier: 2,
                slideShadows: false,
              },
              keyboard: {
                enabled: true,
                onlyInViewport: true,
              },
              breakpoints: {
                // For mobile devices
                0: {
                  slidesPerView: 1.1,
                  spaceBetween: 16,
                  coverflowEffect: {
                    stretch: -30,
                    depth: 80,
                    modifier: 1.5,
                  }
                },
                // Tablets and up
                768: {
                  slidesPerView: 1.3,
                  spaceBetween: 24,
                  coverflowEffect: {
                    stretch: -40,
                    depth: 120,
                    modifier: 1.8,
                  }
                },
                // Desktops
                1024: {
                  slidesPerView: 1.5,
                  spaceBetween: 32,
                  coverflowEffect: {
                    stretch: -50,
                    depth: 150,
                    modifier: 2,
                  }
                }
              },
              on: {
                slideChangeTransitionStart: function () {
                  userNavigated = true;
                },
                slideChangeTransitionEnd: function () {
                  this.slides.forEach(slide => {
                    const v = slide.querySelector('video');
                    if (v) v.pause();
                  });

                  const activeSlide = this.slides[this.activeIndex];
                  if (activeSlide.dataset.type === 'video') {
                    const vid = activeSlide.querySelector('video');
                    if (vid) {
                      vid.play().then(() => {
                        if (!userNavigated) {
                          vid.onended = () => this.slideNext();
                        } else {
                          vid.onended = null;
                          userNavigated = false;
                        }
                      }).catch(() => {
                        if (!userNavigated) {
                          setTimeout(() => this.slideNext(), 2000);
                        }
                        userNavigated = false;
                      });
                    }
                  } else {
                    if (!userNavigated) {
                      setTimeout(() => this.slideNext(), 2000);
                    }
                    userNavigated = false;
                  }
                },
              }
            });

            intro.keyboard.enable();
            document.getElementById('muteToggle').addEventListener('click', () => {
              const vid = document.querySelector('.swiper-slide-active video');
              if (vid) {
                vid.muted = !vid.muted;
                document.getElementById('muteToggle').innerHTML = vid.muted ? 'üîá' : 'üîä';
              }
            });
		});

		let targetDate = new Date();
		targetDate = new Date(targetDate.getTime() + (12 * 60 * 60 * 1000) + (42 * 60 * 1000));

		function updateCountdown() {
			const now = new Date();
			const timeDiff = targetDate - now;

			if (timeDiff <= 0) {
				document.getElementById("count-down").innerHTML = "<h5 class='text-danger'>Event Started</h5>";
				clearInterval(intervalId);
				return;
			}

			const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
			const hours = Math.floor((timeDiff / (1000 * 60 * 60)) % 24);
			const minutes = Math.floor((timeDiff / (1000 * 60)) % 60);
			const seconds = Math.floor((timeDiff / 1000) % 60);

			document.getElementById("eventRemainingDays").textContent = days;
			document.getElementById("eventRemainingHours").textContent = hours.toString().padStart(2, '0');
			document.getElementById("eventRemainingMinutes").textContent = minutes.toString().padStart(2, '0');
			document.getElementById("eventRemainingSeconds").textContent = seconds.toString().padStart(2, '0');
		}

		// ‚è± Initial call & set interval
		updateCountdown();
		const intervalId = setInterval(updateCountdown, 1000);
	</script>
	<script nonce="{{ nonce }}">
		document.addEventListener('DOMContentLoaded', function() {
			const heroSlides = document.querySelectorAll(".swiper-slide");

			heroSlides.forEach((slide, index) => {
				const title = slide.querySelector("h1");
				const subtitle = slide.querySelector("p");
				const buttons = slide.querySelectorAll("a.btn");

				gsap.set([title, subtitle, buttons], { opacity: 0, y: 50 });

				// Animate on Swiper Slide Change
				const animateSlide = () => {
					gsap.to(title, {
						opacity: 1,
						y: 0,
						duration: 1,
						ease: "power2.out",
						delay: 0.2
					});
					gsap.to(subtitle, {
						opacity: 1,
						y: 0,
						duration: 1,
						ease: "power2.out",
						delay: 0.4
					});
					gsap.to(buttons, {
						opacity: 1,
						y: 0,
						duration: 1,
						ease: "power2.out",
						stagger: 0.1,
						delay: 0.6
					});
				};

				if (index === 0) animateSlide(); // Animate first slide on load

				slide.animateIn = animateSlide; // Attach for Swiper
			});
		});
	</script>
{% endblock %}
