{% extends 'base.html' %}
{% load static %}
{% load currency %}
{% load util %}

{% block css %}
	{{ block.super }}
	<style>
	@media only screen and (max-width: 320px) {
			.hero-section {
				max-height: none;
			}
			.hero-bg {
				min-height: clamp(564px, calc(100vh - 93px), 1000px) !important;
			}

			.event-section {
				max-height: none;
			}

			.event-bg {
				min-height: clamp(564px, calc(100vh - 93px), 1000px) !important;
			}

			.faq-section {
				max-height: none;
			}

			.faq-bg {
				min-height: clamp(564px, calc(100vh - 93px), 1000px) !important;
			}

			.contact-section {
				max-height: none;
			}
		}

		@media only screen and (min-width: 321px) and (max-width: 561px) {
			.hero-section {
				max-height: none;
			}
			.hero-bg {
				min-height: clamp(564px, calc(100vh - 93px), 1000px) !important;
			}

			.event-section {
				max-height: none;
			}

			.event-bg {
				min-height: clamp(564px, calc(100vh - 93px), 1000px) !important;
			}

			.faq-section {
				max-height: none;
			}

			.faq-bg {
				min-height: clamp(1024px, calc(100vh - 93px), 1000px) !important;
			}

			.contact-section {
				max-height: none;
			}
		}

		@media only screen and (min-width: 562px) and (max-width: 768px) {
			.hero-section {
				max-height: none;
			}
			.hero-bg {
				min-height: clamp(564px, calc(100vh - 93px), 1000px) !important;
			}

			.event-section {
				max-height: none;
			}

			.event-bg {
				min-height: clamp(564px, calc(100vh - 93px), 1000px) !important;
			}

			.faq-section {
				max-height: none;
			}

			.faq-bg {
				min-height: clamp(564px, calc(100vh - 93px), 1000px) !important;
			}

			.contact-section {
				max-height: none;
			}
		}

		@media only screen and (min-width: 769px) and (max-width: 991.98px) {
			.hero-section {
				max-height: none;
			}
			.hero-bg {
				min-height: clamp(564px, calc(100vh - 93px), 1000px) !important;
			}

			.event-section {
				max-height: none;
			}

			.event-bg {
				min-height: clamp(564px, calc(100vh - 93px), 1000px) !important;
			}

			.faq-section {
				max-height: none;
			}

			.faq-bg {
				min-height: clamp(564px, calc(100vh - 93px), 1000px) !important;
			}

			.contact-section {
				max-height: none;
			}
		}

		@media only screen and (min-width: 992px) {
			.hero-section {
				max-height: 893px;
			}
			.hero-bg {
				min-height: clamp(564px, calc(100vh - 93px), 1000px) !important;
			}

			.event-section {
				max-height: 893px;
			}

			.event-bg {
				min-height: clamp(564px, calc(100vh - 93px), 1000px) !important;
			}

			.faq-section {
				max-height: 893px;
			}

			.faq-bg {
				min-height: clamp(564px, calc(100vh - 93px), 1000px) !important;
			}

			.contact-section {
				max-height: 893px;
			}
		}

	.custom-tabs .nav-link {
		border: none; /* Remove default Bootstrap border */
		font-weight: bold; /* Make the text bold */
		color: black; /* Ensure text is black */
		padding-bottom: 5px; /* Adjust spacing */
		position: relative; /* Needed for underline effect */
	}

	.custom-tabs .nav-link.active {
		color: black; /* Ensure active tab text is black */
		background: transparent !important;
	}

	.custom-tabs .nav-link.active::after {
		content: "";
		display: block;
		width: 100%;
		height: 1px;
		background-color: black; /* Underline color */
		position: absolute;
		bottom: 0;
		left: 0;
	}

    .movie-swiper {
      width: 100% !important;
      /* Height will be automatically adjusted by aspect-ratio of slides */
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 2rem 0;
    }

    .movie-swiper .swiper-wrapper {
      align-items: center;
    }

    .movie-swiper .swiper-slide {
      aspect-ratio: 16 / 9;
      width: 80%; /* Controls visible size of center slide */
      max-width: 960px; /* Optional: prevent it from growing too large */
      border-radius: 20px;
      background: #111;
      color: white;
      font-size: 2rem;
      display: flex;
      justify-content: center;
      align-items: center;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      overflow: hidden;
    }

    .swiper-slide video {
        pointer-events: none; /* This allows clicks to pass through */
    }

    @media (max-width: 767px) {
      .movie-swiper .swiper-slide {
        width: 90% !important;
      }

		#hero-swiper .button-prev {
			scale: 0.8;
			top: calc(100% - 80px) !important;
			left: calc(100% - 180px) !important;
		}

		#hero-swiper .button-next {
			scale: 0.8;
			top: calc(100% - 80px) !important;
			right: 24px !important;
		}
    }

	@media (max-width: 480px) {
		#hero-swiper .button-prev {
			scale: 0.6;
			top: calc(100% - 80px) !important;
			left: calc(100% - 140px) !important;
		}

		#hero-swiper .button-next {
			scale: 0.6;
			top: calc(100% - 80px) !important;
			right: 0 !important;
		}
	}

    /* Zoom effects */
    .zoom-out {
      transform: scale(0.6) !important;
    }

    .zoom-in {
      transform: scale(1) !important;
    }

    #hero-swiper .swiper-slide {
      transition: transform 0.5s ease;
    }

    #hero-swiper .button-prev:after {
        content: none !important;
    }
    #hero-swiper .button-prev {
        width: 96px;
		height: auto;
        z-index: 10;
		top: 50%;
		left: 32px;
		cursor: pointer;
        transition: all 0.3s;
        background-repeat: no-repeat;
        background-position: center;
        background-size: 14px;
    }


    #hero-swiper .button-next:after {
        content: none !important;
    }
    #hero-swiper .button-next {
        width: 96px;
		height: auto;
        top: 50%;
        right: 32px;
        z-index: 10;
        cursor: pointer;
        transition: all 0.3s;
        background-repeat: no-repeat;
        background-position: center;
        background-size: 14px;
    }

	.hover-scale:hover {
		transform: scale(1.05);
		transition: transform 0.3s ease;
	}
	</style>
{% endblock %}

{% block content %}
<section id="hero-section" class="hero-section profile-cover" style="overflow-y: clip;">
    <div class="swiper hero-swiper" id="hero-swiper">
        <div class="swiper-wrapper">
            {% for banner in banners %}
                <div class="swiper-slide">
                    <div class="profile-cover-img hero-section hero-bg" style="background-image: url({{ banner.image.url }}); background-blend-mode: overlay; background-color: #00000080;"></div>
                    <div class="container d-flex flex-column text-white justify-content-center align-items-start position-absolute bottom-50 top-50 start-50 translate-middle-x px-4 px-sm-2 px-md-5 w-100">
                        <h1 class="fw-bold lh-1 mb-2" style="font-size: 40px;">{{ banner.title }}</h1>
                        <p class="fs-lg lh-1 mb-4 w-100 w-md-75 w-lg-50">{{ banner.description }}</p>
                        <div class="d-flex flex-row gap-2">
                            <a type="button" class="btn {{ banner.primaryButtonClassNames }} me-2" href="{{ banner.primaryButtonLink }}">{{ banner.primaryButtonText }}</a>
                            <a type="button" class="btn {{ banner.secondaryButtonClassNames }} me-2" href="{{ banner.secondaryButtonLink }}">{{ banner.secondaryButtonText }}</a>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
        <div class="position-absolute button-prev">
			<div class="position-relative d-flex flex-row justify-content-end w-72px">
            	<img src="{% static R.images.arrowPrev.path %}" width="72">
            	<div class="w-56px h-56px rounded-circle position-absolute" style="border: 1px solid #FFFFFF; top: 12%; left: -24px;"></div>
			</div>
        </div>
        <div class="position-absolute button-next">
			<div class="position-relative d-flex flex-row justify-content-start w-72px">
				<img src="{% static R.images.arrowNext.path %}" width="72">
				<div class="w-56px h-56px rounded-circle position-absolute" style="border: 1px solid #FFFFFF; top: 12%; right: -24px;"></div>
			</div>
        </div>
    </div>
</section>
<section id="intro-section" class="intro-section container d-flex flex-column justify-content-center align-items-center py-5">
    <div class="swiper movie-swiper">
      <div class="swiper-wrapper">
        <div class="swiper-slide d-flex flex-column text-center rounded-4" data-type="image" style="background: url('{{ request.scheme }}://{{ request.get_host }}{% static R.images.visionBg.path %}') center center / cover;">
            <span>Our Vision</span>
            <span class="fs-5 fw-light lh-1 mb-4 w-100 w-md-75 w-lg-50">{{ intro.vision|safe }}</span>
        </div>
        <div class="swiper-slide rounded-4" data-type="video" style="position: relative;">
          <video id="introVideo" playsinline autoplay muted loop style="width: 100%; object-fit: cover; border-radius: 16px; aspect-ratio: 16/9 !important;" preload="auto" poster="{% static R.images.introThumbnail.path %}">
            <source src="{% static R.images.intro.path %}" type="video/mp4" />
          </video>
          <button id="muteToggle" style="
            position: absolute;
            z-index: 1000;
            top: 16px;
            right: 16px;
            background: rgba(0,0,0,0.5);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            font-size: 20px;
            cursor: pointer;
          ">🔇</button>
        </div>
        <div class="swiper-slide d-flex flex-column text-center rounded-4" data-type="image" style="background: url('{{ request.scheme }}://{{ request.get_host }}{% static R.images.missionBg.path %}') center center / cover;">
            <span>Our Mission</span>
            <span class="fs-5 fw-light lh-1 mb-4 w-100 w-md-75 w-lg-50">{{ intro.mission|safe }}</span>
        </div>
      </div>
    </div>
</section>
<section id="event-section" class="event-section profile-cover" style="overflow-y: clip;">
    <div class="profile-cover-img hero-section event-bg" style="background-image: url({{ request.scheme }}://{{ request.get_host }}{{ event.background }})"></div>
    <div class="container d-flex flex-column text-white justify-content-center align-items-start position-absolute bottom-50 top-50 start-50 translate-middle-x px-4 px-sm-2 px-md-0 w-100 gap-3">
		<h2 class="fw-light fs-1 lh-1">OUR EVENTS</h2>
        <h1 class="fw-semibold lh-1 mb-2" style="font-size: 48px;">{{ event.title }}</h1>
		<p class="fs-sm fw-light lh-1 mb-4 w-100 w-md-75 w-lg-50">{{ event.subtitle }}</p>
		<div class="d-flex flex-row gap-3" id="count-down">
			<div class="d-flex flex-column gap-1">
				<span class="fw-semibold lh-1" style="font-size: 36px;" id="eventRemainingDays">12</span>
				<span class="fs-base">days</span>
			</div>
			<div class="d-flex flex-column gap-1">
				<span class="fw-semibold lh-1" style="font-size: 36px;" id="eventRemainingHours">10</span>
				<span class="fs-base">hours</span>
			</div>
			<div class="d-flex flex-column gap-1">
				<span class="fw-semibold lh-1" style="font-size: 36px;" id="eventRemainingMinutes">24</span>
				<span class="fs-base">minutes</span>
			</div>
			<div class="d-flex flex-column gap-1">
				<span class="fw-semibold lh-1" style="font-size: 36px;" id="eventRemainingSeconds">13</span>
				<span class="fs-base">sec</span>
			</div>
		</div>
		<div class="d-flex flex-row gap-2">
			<a type="button" class="btn btn-primary me-2" href="{{ event.link }}">Learn More</a>
		</div>
    </div>
</section>
<section id="programs-section" class="programs-section container d-flex flex-column justify-content-center align-items-center pb-4 pt-5">
	<h1 class="fw-medium lh-1 mb-2 text-center" style="font-size: 50px;">What We Do</h1>
	<p class="fs-5 mb-4 text-center" style="max-width: 768px;">Have questions? We're here to help you on your English learning journey.</p>
	<div class="d-flex flex-column w-100">
			<ul class="custom-tabs nav nav-tabs justify-content-center border-bottom-0">
				<li class="nav-item m-0">
					<a href="#audience-1" class="nav-link active" data-bs-toggle="tab">
						Audience 1
					</a>
				</li>
				<li class="nav-item m-0">
					<a href="#audience-2" class="nav-link" data-bs-toggle="tab">
						Audience 2
					</a>
				</li>
				<li class="nav-item m-0">
					<a href="#audience-3" class="nav-link" data-bs-toggle="tab">
						Audience 3
					</a>
				</li>
			</ul>
			<div class="tab-content mt-3 w-100">
				<div class="tab-pane fade show active w-100" id="audience-1">
					<div class="swiper w-100" id="audience-1-programs">
						<div class="swiper-wrapper" style="padding-bottom: 16px;">
							{% for _ in ''|ljust:5 %}
								<div class="swiper-slide pt-2" style="max-width: 360px;">
									<div class="card w-100 hover-scale">
										<img src="{% static R.images.programSample.path %}" class="card-img-top w-100" style="object-fit: none;" alt="Program">
										<div class="card-body d-flex flex-column justify-content-center align-items-start">
											<h4 class="fs-5 fw-bold lh-1 mb-1">Program Name</h4>
											<p class="fs-xs mb-2">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim  Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore es </p>
											<button class="btn btn-primary" style="padding: 4px 16px;">Read More</button>
										</div>
									</div>
								</div>
							{% endfor %}
						</div>
					</div>
				</div>
				<div class="tab-pane fade w-100" id="audience-2">
					<div class="swiper w-100" id="audience-2-programs">
						<div class="swiper-wrapper" style="padding-bottom: 16px;">
							{% for _ in ''|ljust:5 %}
								<div class="swiper-slide pt-2" style="max-width: 360px;">
									<div class="card w-100 hover-scale">
										<img src="{% static R.images.programSample.path %}" class="card-img-top w-100" style="object-fit: none;" alt="Program">
										<div class="card-body d-flex flex-column justify-content-center align-items-start">
											<h4 class="fs-5 fw-bold lh-1 mb-1">Program Name</h4>
											<p class="fs-xs mb-2">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim  Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore es </p>
											<button class="btn btn-primary" style="padding: 4px 16px;">Read More</button>
										</div>
									</div>
								</div>
							{% endfor %}
						</div>
					</div>
				</div>
				<div class="tab-pane fade w-100" id="audience-3">
					<div class="swiper w-100" id="audience-3-programs">
						<div class="swiper-wrapper" style="padding-bottom: 16px;">
							{% for _ in ''|ljust:5 %}
								<div class="swiper-slide pt-2" style="max-width: 360px;">
									<div class="card w-100 hover-scale">
										<img src="{% static R.images.programSample.path %}" class="card-img-top w-100" style="object-fit: none;" alt="Program">
										<div class="card-body d-flex flex-column justify-content-center align-items-start">
											<h4 class="fs-5 fw-bold lh-1 mb-1">Program Name</h4>
											<p class="fs-xs mb-2">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim  Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore es </p>
											<button class="btn btn-primary" style="padding: 4px 16px;">Read More</button>
										</div>
									</div>
								</div>
							{% endfor %}
						</div>
					</div>
				</div>
			</div>
		</div>
</section>
<section id="faq-section" class="faq-section profile-cover" style="overflow-y: clip;">
	<div class="profile-cover-img hero-section faq-bg" style="background-image: url({{ request.scheme }}://{{ request.get_host }}{{ faq.background }})"></div>
	<div class="d-flex flex-column text-white justify-content-center align-items-start position-absolute top-0 start-50 translate-middle-x px-4 px-sm-2 px-md-0 w-100 h-100" style="background: #0A7EBFC4;">
		<div class="container d-flex flex-column text-white justify-content-center align-items-center gap-3">
			<h1 class="fw-medium lh-1 mb-0 text-center" style="font-size: 50px;">FAQS</h1>
			<p class="fs-5 mb-5 text-center">Find answers to common questions about ESP Academy.</p>
			<div class="d-flex flex-column flex-md-row text-dark w-100 gap-2">
				<div class="d-flex flex-column w-100 gap-2">
					{% for _ in ''|ljust:5 %}
						<a href="#" class="d-flex flex-row w-100 justify-content-between card card-body px-3 py-2 mb-0 cursor-pointer">
							<span>What are the qualifications of your tutors?</span>
							<i class="bi bi-chevron-right"></i>
						</a>
					{% endfor %}
				</div>
				<div class="d-flex flex-column w-100 gap-2">
					{% for _ in ''|ljust:5 %}
						<a href="#" class="d-flex flex-row w-100 justify-content-between card card-body px-3 py-2 mb-0 cursor-pointer">
							<span>What are the qualifications of your tutors?</span>
							<i class="bi bi-chevron-right"></i>
						</a>
					{% endfor %}
				</div>
			</div>
		</div>
	</div>
</section>
<section id="contact-section" class="contact-section container d-flex flex-column justify-content-center align-items-center py-5">
	<h1 class="fw-medium lh-1 mb-2 text-center" style="font-size: 50px;">Get in touch with us</h1>
	<p class="fs-5 mb-4 text-center" style="max-width: 768px;">Have questions? We're here to help you on your English learning journey.</p>
	<div class="d-flex flex-column-reverse flex-md-row gap-2 w-100">
		<div class="d-flex flex-column w-100">
			<div class="card bg-primary card-body text-white gap-4">
				<div class="d-flex flex-row align-items-center">
					<i class="bi bi-envelope bg-light h-32px w-32px rounded-5 text-black text-center" style="line-height: 2.4;"></i>
					<div class="d-flex flex-column ms-2">
						<span class="fw-medium fs-6 lh-1 mb-1">Email Address</span>
						<span class="opacity-75 fs-base lh-1">support@we-lead.com</span>
					</div>
				</div>
				<div class="d-flex flex-row align-items-center">
					<i class="bi bi-phone bg-light h-32px w-32px rounded-5 text-black text-center" style="line-height: 2.4;"></i>
					<div class="d-flex flex-column ms-2">
						<span class="fw-medium fs-6 lh-1 mb-1">Mobile Number</span>
						<span class="opacity-75 fs-base lh-1">+1-800-123-4567</span>
					</div>
				</div>
				<div class="d-flex flex-row align-items-center">
					<i class="bi bi-geo-alt bg-light h-32px w-32px rounded-5 text-black text-center" style="line-height: 2.4;"></i>
					<div class="d-flex flex-column ms-2">
						<span class="fw-medium fs-6 lh-1 mb-1">Address</span>
						<span class="opacity-75 fs-base lh-1">123 English Lane, Learning City, Edutopia</span>
					</div>
				</div>
			</div>
			<div class="d-flex flex-column h-100">

			</div>
		</div>
		<div class="d-flex flex-column card card-body w-100">
			<div class="row">
				<label class="col-12 col-sm-6 form-label text-dark text-muted fs-sm">First Name<span class="text-danger">*</span>
					<input type="text" class="form-control input-field" id="firstName" name="firstName" placeholder="John" value="{% if request.user.is_authenticated %}{{ request.user.firstName }}{% endif %}" required>
				</label>
			 	<label class="col-12 col-sm-6 form-label text-dark text-muted fs-sm">Last Name<span class="text-danger">*</span>
					<input type="text" class="form-control input-field" id="lastName" name="lastName" placeholder="Smith" value="{% if request.user.is_authenticated %}{{ request.user.lastName }}{% endif %}" required>
				</label>
			</div>
			<div class="row">
				<div class="col-12 col-md-6 text-dark">
					<label for="mobileNumber">Mobile Number<span class="text-danger">*</span></label>
					<div class="input-group">
						<select id="countryCode" name="countryCode" class="form-control select text-end p-0" data-minimum-results-for-search="Infinity" data-width="auto"  style="background: #F1F0EE; !important; max-width: max-content !important; border: 0 solid transparent !important; border-top-left-radius: 8px; border-bottom-left-radius: 8px;" aria-label="Country Code" required>
							{% for country in countries %}
								<option value="{{ country.code }}" {% if request.user.is_authenticated and request.user.countryCode == country.code %}selected{% endif %}>{{ country.emoji }} +{{ country.code }}</option>
							{% endfor %}
						</select>
						<input type="text" id="mobileNumber" name="mobileNumber" class="form-control" placeholder="1234567890"  style="background: #F1F0EE; !important; border: 0 solid transparent !important; border-top-right-radius: 8px; border-bottom-right-radius: 8px;" inputmode="numeric" value="{% if request.user.is_authenticated and request.user.mobileNumber %}{{ request.user.mobileNumberWithLength }}{% endif %}" required>
					</div>
				</div>
				<label class="col-12 col-md-6 form-label text-dark text-muted fs-sm">Email Address<span class="text-danger">*</span>
					<input type="text" class="form-control input-field" id="email" name="email" placeholder="john@gmail.com" value="{% if request.user.is_authenticated %}{{ request.user.lastName }}{% endif %}" required>
				</label>
			</div>
			<label class="col-12 form-label text-dark text-muted fs-sm">Message<span class="text-danger">*</span>
				<textarea class="form-control input-field" id="message" name="message" placeholder="What can we help you with?" style="height: 200px; max-height: 200px;" required></textarea>
			</label>
			<button class="btn btn-primary w-100">Submit</button>
		</div>
	</div>
</section>
<section id="sponsors-section" class="sponsors-section d-flex flex-column justify-content-center align-items-center py-5 bg-primary">
    <div class="container">
        <div class="d-flex flex-row gap-2 swiper" id="sponsors">
            <div class="swiper-wrapper" >
                {% for _ in ''|ljust:10 %}
                    <img src="{% static R.images.sponsorSample.path %}" class="swiper-slide img-fluid px-2" alt="Sponsor" style="max-width: 160px; max-height: 160px;">
                {% endfor %}
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block js %}
{{ block.super }}
	<script nonce="{{ nonce }}">
		document.addEventListener('DOMContentLoaded', function() {
			function animateCurrentSlide(slide) {
				if (!slide) return;
				const title = slide.querySelector("h1");
				const subtitle = slide.querySelector("p");
				const buttons = slide.querySelectorAll("a.btn");

				if (title && subtitle && buttons.length) {
					gsap.to(title, {
						opacity: 1,
						y: 0,
						duration: 1,
						ease: "power2.out",
						delay: 0.2
					});
					gsap.to(subtitle, {
						opacity: 1,
						y: 0,
						duration: 1,
						ease: "power2.out",
						delay: 0.4
					});
					gsap.to(buttons, {
						opacity: 1,
						y: 0,
						duration: 1,
						ease: "power2.out",
						stagger: 0.1,
						delay: 0.6
					});
				}
			}

            let autoplayTimeout;
            let heroSwiper = new Swiper('.hero-swiper', {
              loop: true,
              slidesPerView: 1,
              allowTouchMove: false,
              on: {
                init: function () {
                  startAutoplay();
				  animateCurrentSlide(this.slides[this.activeIndex]);
                }
              },
            });

            function startAutoplay() {
              clearTimeout(autoplayTimeout);
              autoplayTimeout = setTimeout(() => {
                triggerZoomSlide('next');
                startAutoplay();
              }, 5000);
            }

            function triggerZoomSlide(direction = 'next') {
              const slides = heroSwiper.slides;

              // 1. Zoom out
              slides.forEach(slide => {
                slide.classList.remove('zoom-in');
                slide.classList.add('zoom-out');
              });

              // 2. After zoom out, change slide
              setTimeout(() => {
                if (direction === 'next') {
                  heroSwiper.slideNext(500, false);
                } else {
                  heroSwiper.slidePrev(500, false);
                }

                // 3. After slide transition, zoom in
                setTimeout(() => {
                  slides.forEach(slide => {
                    slide.classList.remove('zoom-out');
                    slide.classList.add('zoom-in');
                  });
				  animateCurrentSlide(slides[heroSwiper.activeIndex]);
                }, 500);
              }, 500);
            }

            // Restart autoplay on manual navigation
            document.querySelector('.button-next').addEventListener('click', () => {
              triggerZoomSlide('next');
              startAutoplay();
            });

            document.querySelector('.button-prev').addEventListener('click', () => {
              triggerZoomSlide('prev');
              startAutoplay();
            });

			let audience1Programs = new Swiper('#audience-1-programs', {
				slidesPerView: 'auto',
				spaceBetween: 16,
				loop: true,
				autoplay: {
					delay: 2000,
					disableOnInteraction: false,
				}
			});
			let audience2Programs = new Swiper('#audience-2-programs', {
				slidesPerView: 'auto',
				spaceBetween: 16,
				loop: true,
				autoplay: {
					delay: 2000,
					disableOnInteraction: false,
				}
			});
			let audience3Programs = new Swiper('#audience-3-programs', {
				slidesPerView: 'auto',
				spaceBetween: 16,
				loop: true,
				autoplay: {
					delay: 2000,
					disableOnInteraction: false,
				}
			});

            let sponsors = new Swiper('#sponsors', {
                slidesPerView: 'auto',
                spaceBetween: 16,
                loop: true,
                autoplay: {
                    delay: 2000,
                    disableOnInteraction: false,
                }
            });

            let userNavigated = false;
            const intro = new Swiper('.movie-swiper', {
              effect: 'coverflow',
              loop: false,
              centeredSlides: true,
              initialSlide: 1,
              grabCursor: true,
              slidesPerView: 1.5,
              spaceBetween: 32,
              coverflowEffect: {
                rotate: 0,
                stretch: -50,
                depth: 150,
                modifier: 2,
                slideShadows: false,
              },
              keyboard: {
                enabled: true,
                onlyInViewport: true,
              },
              breakpoints: {
                // For mobile devices
                0: {
                  slidesPerView: 1.1,
                  spaceBetween: 16,
                  coverflowEffect: {
                    stretch: -30,
                    depth: 80,
                    modifier: 1.5,
                  }
                },
                // Tablets and up
                768: {
                  slidesPerView: 1.3,
                  spaceBetween: 24,
                  coverflowEffect: {
                    stretch: -40,
                    depth: 120,
                    modifier: 1.8,
                  }
                },
                // Desktops
                1024: {
                  slidesPerView: 1.5,
                  spaceBetween: 32,
                  coverflowEffect: {
                    stretch: -50,
                    depth: 150,
                    modifier: 2,
                  }
                }
              },
              on: {
                slideChangeTransitionStart: function () {
                  userNavigated = true;
                },
                slideChangeTransitionEnd: function () {
                  this.slides.forEach(slide => {
                    const v = slide.querySelector('video');
                    if (v) v.pause();
                  });

                  const activeSlide = this.slides[this.activeIndex];
                  if (activeSlide.dataset.type === 'video') {
                    const vid = activeSlide.querySelector('video');
                    if (vid) {
                      vid.play().then(() => {
                        if (!userNavigated) {
                          vid.onended = () => this.slideNext();
                        } else {
                          vid.onended = null;
                          userNavigated = false;
                        }
                      }).catch(() => {
                        if (!userNavigated) {
                          setTimeout(() => this.slideNext(), 2000);
                        }
                        userNavigated = false;
                      });
                    }
                  } else {
                    if (!userNavigated) {
                      setTimeout(() => this.slideNext(), 2000);
                    }
                    userNavigated = false;
                  }
                },
              }
            });

            intro.keyboard.enable();
            document.getElementById('muteToggle').addEventListener('click', () => {
              const vid = document.querySelector('.swiper-slide-active video');
              if (vid) {
                vid.muted = !vid.muted;
                document.getElementById('muteToggle').innerHTML = vid.muted ? '🔇' : '🔊';
              }
            });
		});

		let targetDate = new Date();
		targetDate = new Date(targetDate.getTime() + (12 * 60 * 60 * 1000) + (42 * 60 * 1000));

		function updateCountdown() {
			const now = new Date();
			const timeDiff = targetDate - now;

			if (timeDiff <= 0) {
				document.getElementById("count-down").innerHTML = "<h5 class='text-danger'>Event Started</h5>";
				clearInterval(intervalId);
				return;
			}

			const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
			const hours = Math.floor((timeDiff / (1000 * 60 * 60)) % 24);
			const minutes = Math.floor((timeDiff / (1000 * 60)) % 60);
			const seconds = Math.floor((timeDiff / 1000) % 60);

			document.getElementById("eventRemainingDays").textContent = days;
			document.getElementById("eventRemainingHours").textContent = hours.toString().padStart(2, '0');
			document.getElementById("eventRemainingMinutes").textContent = minutes.toString().padStart(2, '0');
			document.getElementById("eventRemainingSeconds").textContent = seconds.toString().padStart(2, '0');
		}

		// ⏱ Initial call & set interval
		updateCountdown();
		const intervalId = setInterval(updateCountdown, 1000);
	</script>
	<script nonce="{{ nonce }}">
		document.addEventListener('DOMContentLoaded', function() {
			const heroSlides = document.querySelectorAll(".swiper-slide");

			heroSlides.forEach((slide, index) => {
				const title = slide.querySelector("h1");
				const subtitle = slide.querySelector("p");
				const buttons = slide.querySelectorAll("a.btn");

				gsap.set([title, subtitle, buttons], { opacity: 0, y: 50 });

				// Animate on Swiper Slide Change
				const animateSlide = () => {
					gsap.to(title, {
						opacity: 1,
						y: 0,
						duration: 1,
						ease: "power2.out",
						delay: 0.2
					});
					gsap.to(subtitle, {
						opacity: 1,
						y: 0,
						duration: 1,
						ease: "power2.out",
						delay: 0.4
					});
					gsap.to(buttons, {
						opacity: 1,
						y: 0,
						duration: 1,
						ease: "power2.out",
						stagger: 0.1,
						delay: 0.6
					});
				};

				if (index === 0) animateSlide(); // Animate first slide on load

				slide.animateIn = animateSlide; // Attach for Swiper
			});
		});
	</script>
{% endblock %}
